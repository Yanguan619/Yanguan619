import{_ as s}from"./plugin-vue_export-helper-DlAUqK2U.js";import{c as a,g as n,o as e}from"./app-DwiX3Syz.js";const l="/assets/%E6%A3%80%E6%9F%A5%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E7%89%88%E6%9C%AC%E7%89%88%E6%9C%AC%E4%BB%A3%E5%8F%B7%E5%86%85%E6%A0%B8%E7%89%88%E6%9C%AC%E6%9E%B6%E6%9E%84-CUB85umW.png",t="/assets/image-20241010142837112-DM6dGLTL.png",h="/assets/image-20241009085305134-CDIiHLYn.png",k={};function d(p,i){return e(),a("div",null,i[0]||(i[0]=[n('<h2 id="安装引导" tabindex="-1"><a class="header-anchor" href="#安装引导"><span>安装引导</span></a></h2><p>检查操作系统版本、版本代号、内核版本、架构</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">cat</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /etc/issue</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> &amp;&amp; </span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">lsb_release</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -cs</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> &amp;&amp; </span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">uname</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -a</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> &amp;&amp; </span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">arch</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><figure><img src="'+l+`" alt="检查操作系统版本、版本代号、内核版本、架构" tabindex="0" loading="lazy"><figcaption>检查操作系统版本、版本代号、内核版本、架构</figcaption></figure><h2 id="初始化配置" tabindex="-1"><a class="header-anchor" href="#初始化配置"><span>初始化配置</span></a></h2><h3 id="用户初步管理" tabindex="-1"><a class="header-anchor" href="#用户初步管理"><span>用户初步管理</span></a></h3><h4 id="启用root" tabindex="-1"><a class="header-anchor" href="#启用root"><span>启用root</span></a></h4><p>Ubuntu安装时，强制让用户创建了一个普通用户，但却没有让配置root用户。</p><p>Ubuntu默认不建议用户直接使用root，这里可以通过设置root口令让root可用。</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> passwd</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> root</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">su</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> -</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> root</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>这时root可以在控制台登录，或 <code>su</code>到root，但不能使用root通过sshd直接登录。</p><h3 id="配置sshd" tabindex="-1"><a class="header-anchor" href="#配置sshd"><span>配置sshd</span></a></h3><p><code>vim /etc/ssh/sshd_config</code></p><p>找到： <code>#PermitRootLogin prohibit-password</code></p><p>改为： <code>PermitRootLogin yes</code></p><p>重启sshd服务： <code>systemctl restart sshd</code></p><h4 id="创建其他用户" tabindex="-1"><a class="header-anchor" href="#创建其他用户"><span>创建其他用户</span></a></h4><p>可以酌情，通过 <code>groupadd</code>、<code>useradd</code>、<code>passwd</code>创建其他用户。</p><p><mark>后续都使用root用户完成初始化配置。</mark></p><h3 id="网络配置" tabindex="-1"><a class="header-anchor" href="#网络配置"><span>网络配置</span></a></h3><h4 id="修改主机名" tabindex="-1"><a class="header-anchor" href="#修改主机名"><span>修改主机名</span></a></h4><p>安装Ubuntu时已经指定了主机名，可以用以下命令随时修改并永久生效</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> hostnamectl</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> --static</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> set-hostname</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> NEW_HOSTNAME</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>值得注意的是，除了使用 <code>hostnamectl</code>修改，Ubuntu的hosts表中还用127.0.1.1绑了初始的主机名，这里一并修改</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">vim</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /etc/hosts</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">将</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">127.0.1.1</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ORI_HOSTNAME</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">改为</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">127.0.1.1</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> MY_NEW_HOSTNAME</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">注意不要修改127.0.0.1那一行。</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="配置静态-ip-地址" tabindex="-1"><a class="header-anchor" href="#配置静态-ip-地址"><span>配置静态 IP 地址</span></a></h4><p>作为服务器使用的 Linux server，一定要绑死固定 IP 地址，而非使用 DHCP。</p><blockquote><p>Ubuntu-22版本，对网络配置文件做了大幅度更改，配置使用 yaml 格式，且换成 netplan 管理网络</p></blockquote><p>默认情况下，安装完的Ubuntu，使用 DHCP 获取网络</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">cat</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /etc/netplan/00-installer-config.yaml</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><div class="language-yaml line-numbers-mode" data-highlighter="shiki" data-ext="yaml" data-title="yaml" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># This is the network config written by &#39;subiquity&#39;</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">network</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">  ethernets</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">    ens33</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">      dhcp4</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">true</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">  version</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">2</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>修改为：</p><div class="language-yaml line-numbers-mode" data-highlighter="shiki" data-ext="yaml" data-title="yaml" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">network</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">  renderer</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">networkd</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">  ethernets</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">    ens33</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">      addresses</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        - </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">192.168.172.141/24</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">      nameservers</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">        addresses</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: [</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">223.5.5.5</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">, </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">8.8.8.8</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">]</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">      routes</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">:</span></span>
<span class="line"><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">        - </span><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">to</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">default</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">          via</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">192.168.172.2</span></span>
<span class="line"><span style="--shiki-light:#E45649;--shiki-dark:#E06C75;">  version</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">: </span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">2</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>配置含义：</p><ul><li>节点IP为192.168.172.141，子网掩码为255.255.255.0即24，默认网关为192.168.172.2。</li><li>主DNS为阿里云的223.5.5.5，备DNS为8.8.8.8。</li></ul><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 实例</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">vi</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /etc/netplan/50-cloud-init.yaml</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><figure><img src="`+t+`" alt="50-cloud-init.yaml" tabindex="0" loading="lazy"><figcaption>50-cloud-init.yaml</figcaption></figure><blockquote><p>在DNS(nameservers-addresses)列表中添加了114.114.114.114。 配置含义：节点IP：192.168.99.115，掩码：24，网关：192.168.99.1，DNS：114.114.114.114。</p></blockquote><p>使网络修改生效：</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> netplan</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> apply</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><h4 id="验证互联网可达" tabindex="-1"><a class="header-anchor" href="#验证互联网可达"><span>验证互联网可达</span></a></h4><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">ping</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> www.baidu.com</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">curl</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> https://www.baidu.com</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><blockquote><p>curl命令如果暂时没有，则等待apt源配置完成后，再来验证。也可以使用 <code>apt install curl</code>先行安装。</p></blockquote><h3 id="时钟配置" tabindex="-1"><a class="header-anchor" href="#时钟配置"><span>时钟配置</span></a></h3><h4 id="设置时区" tabindex="-1"><a class="header-anchor" href="#设置时区"><span>设置时区</span></a></h4><p>默认安装完的Ubuntu，使用的是通用时区UTC，和北京时间差8小时，除非是有全球化应用的需要，否则该默认配置一定要改。</p><p>这里需要改为本地时区CST模式，并设置为东八区时间（Asia/Shanghai, CST, +0800）</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">timedatectl</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> set-timezone</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Asia/Shanghai</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>修改后，可以通过下面的命令查看当前时区和时间格式：</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">timedatectl</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> status</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">               Local</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> time:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Sun</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 2023-12-17</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 11:25:08</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> CST</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">           Universal</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> time:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Sun</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 2023-12-17</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 03:25:08</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> UTC</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">                 RTC</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> time:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Sun</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 2023-12-17</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 03:25:08</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">                Time</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> zone:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Asia/Shanghai</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> (CST, </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">+0800</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;">)</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">System</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> clock</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> synchronized:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> yes</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">              NTP</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> service:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> active</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">          RTC</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> in</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> local</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> TZ:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> no</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="设为24小时格式-可选" tabindex="-1"><a class="header-anchor" href="#设为24小时格式-可选"><span>设为24小时格式（可选）</span></a></h4><p>ubuntu默认使用12小时格式，这里可以按照习惯，选择改为24小时模式。</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">echo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;LC_TIME=en_DK.UTF-8&quot;</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> &gt;&gt; </span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">/etc/default/locale</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>注意这个修改，无法通过sudo实现，必须使用root用户进行修改。</p><p>修改后，通过date命令查看</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">date</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Sun</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> Dec</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 17</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 11:31:45</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> CST</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> 2023</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="设置时钟同步-可选" tabindex="-1"><a class="header-anchor" href="#设置时钟同步-可选"><span>设置时钟同步（可选？）</span></a></h4><p>对于任意的集群环境，节点间的时间必须精确一致，因此时钟同步必须设置。</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">vim</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /etc/systemd/timesyncd.conf</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>这里使用腾讯的时钟同步服务器。</p><p>改前：</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">#NTP=</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">#FallbackNTP=ntp.ubuntu.com</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">#RootDistanceMaxSec=5</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">#PollIntervalMinSec=32</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;">#PollIntervalMaxSec=2048</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>改后：</p><div class="language- line-numbers-mode" data-highlighter="shiki" data-ext="" data-title="" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span>NTP=ntp.tencent.com</span></span>
<span class="line"><span>FallbackNTP=ntp1.tencent.com,ntp2.tencent.com,ntp3.tencent.com</span></span>
<span class="line"><span>RootDistanceMaxSec=5</span></span>
<span class="line"><span>PollIntervalMinSec=32</span></span>
<span class="line"><span>PollIntervalMaxSec=2048</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>保存退出，重启时钟同步服务</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">systemctl</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> restart</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> systemd-timesyncd</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">systemctl</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> status</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> systemd-timesyncd</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><p>当systemd-timesyncd的状态里，显示了时钟同步的服务器，则表明时钟同步服务器调用成功</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">Status:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> &quot;Initial synchronization to time server 106.55.184.199:123 (ntp.tencent.com).&quot;</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><p>用 <code>timedatectl</code>可以查看时钟同步状态</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">$</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> timedatectl</span></span>
<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">......</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">System</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> clock</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> synchronized:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> yes</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">              NTP</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> service:</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> active</span></span>
<span class="line"><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">......</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>这里的yes，表示时钟同步已经成功。</p><h3 id="ubuntu安装docker" tabindex="-1"><a class="header-anchor" href="#ubuntu安装docker"><span>Ubuntu安装Docker</span></a></h3><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 旧版本卸载</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">apt-get</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> remove</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> docker</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> docker-engine</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> docker.io</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> containerd</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> runc</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 安装依赖包</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">apt-get</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> update</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">apt-get</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> install</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> ca-certificates</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> curl</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> gnupg</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> lsb-release</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 添加官方密钥</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">curl</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -fsSL</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> http://mirrors.aliyun.com/docker-ce/linux/ubuntu/gpg</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> | </span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> apt-key</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> add</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> -</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 设置稳定版仓库</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">sudo</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> add-apt-repository</span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;"> \\</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">	&quot;deb [arch=amd64] https://mirrors.ustc.edu.cn/docker-ce/linux/ubuntu/ </span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">\\</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">	$(</span><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">lsb_release</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -cs</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">) </span><span style="--shiki-light:#0184BC;--shiki-dark:#56B6C2;">\\</span></span>
<span class="line"><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">	stable&quot;</span></span>
<span class="line"><span style="--shiki-light:#A0A1A7;--shiki-light-font-style:italic;--shiki-dark:#7F848E;--shiki-dark-font-style:italic;"># 安装最新版本的 Docker Engine-Community 和 containerd</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">apt-get</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> install</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> docker-ce</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> docker-ce-cli</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> containerd.io</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">docker</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;"> -v</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="安装后产生的问题" tabindex="-1"><a class="header-anchor" href="#安装后产生的问题"><span>安装后产生的问题</span></a></h2><h3 id="磁盘分配错了" tabindex="-1"><a class="header-anchor" href="#磁盘分配错了"><span>磁盘分配错了</span></a></h3><figure><img src="`+h+`" alt="磁盘分配" tabindex="0" loading="lazy"><figcaption>磁盘分配</figcaption></figure><ol><li>应该把ubuntu--vg-lv--0挂到/下</li><li>那原来的/boot怎么弄</li></ol><h4 id="解决方案" tabindex="-1"><a class="header-anchor" href="#解决方案"><span>解决方案</span></a></h4><p><mark>TODO</mark></p><p>看硬盘可用空间或者将其他的空间划分出来分配到指定路径</p><p>fdisk工具</p><p>parted工具</p><div class="language-bash line-numbers-mode" data-highlighter="shiki" data-ext="bash" data-title="bash" style="--shiki-light:#383A42;--shiki-dark:#abb2bf;--shiki-light-bg:#FAFAFA;--shiki-dark-bg:#282c34;"><pre class="shiki shiki-themes one-light one-dark-pro vp-code"><code><span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">$</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> lsblk</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">NAME</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">                      MAJ:MIN</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> RM</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  SIZE</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> RO</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> TYPE</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> MOUNTPOINTS</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">loop0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">                       7:0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">    0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 59.8M</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  1</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> loop</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /snap/core20/2321</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">loop1</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">                       7:1</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">    0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 77.4M</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  1</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> loop</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /snap/lxd/29353</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">loop2</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">                       7:2</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">    0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 33.7M</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  1</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> loop</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /snap/snapd/21761</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">nvme1n1</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">                   259:0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">    0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  3.5T</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> disk</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> </span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">└─nvme1n1p1</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">               259:2</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">    0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  3.5T</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> part</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> </span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">nvme0n1</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">                   259:1</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">    0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  3.5T</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> disk</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> </span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">├─nvme0n1p1</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">               259:3</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">    0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    1G</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> part</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> /boot/efi</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">├─nvme0n1p2</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">               259:4</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">    0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">    2G</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> part</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> </span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">└─nvme0n1p3</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">               259:5</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">    0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  3.5T</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> part</span><span style="--shiki-light:#383A42;--shiki-dark:#ABB2BF;"> </span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">  ├─ubuntu--vg-ubuntu--lv</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> 253:0</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">    0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  100G</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> lvm</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  /</span></span>
<span class="line"><span style="--shiki-light:#4078F2;--shiki-dark:#61AFEF;">  └─ubuntu--vg-lv--0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">      253:1</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">    0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  3.4T</span><span style="--shiki-light:#986801;--shiki-dark:#D19A66;">  0</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;"> lvm</span><span style="--shiki-light:#50A14F;--shiki-dark:#98C379;">  /boot</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p>缩小 <code>/boot</code> 大小，调整 <code>/</code> 大小：</p><ol><li>查看/boot分区是否被挂载(可选) <code>mount | grep /boot</code></li><li>卸载分区：<code>umount /boot</code></li><li>缩小逻辑卷为 500M：<code>lvreduce -L -500M ubuntu--vg-lv--0</code></li><li>调整/分区的逻辑卷大小到可用空间的最大值：<code>lvextend -l +100%FREE /dev/ubuntu--vg-ubuntu--lv</code></li><li>调整文件系统的大小：<code>resize2fs /dev/ubuntu--vg-ubuntu--lv</code></li><li>重新挂载/boot分区：<code>mount /dev/ubuntu--vg-lv--0 /boot</code></li><li>验证分配后的根目录大小：<code>df -h</code></li></ol><h1 id="附录" tabindex="-1"><a class="header-anchor" href="#附录"><span>附录</span></a></h1><h2 id="lsblk表头解释" tabindex="-1"><a class="header-anchor" href="#lsblk表头解释"><span>lsblk表头解释</span></a></h2><ul><li><code>NAME</code>: 设备的名称。</li><li><code>MAJ:MIN</code>: 主设备号和次设备号。</li><li><code>RM</code>: 设备是否可移动（1表示是，0表示否）。</li><li><code>SIZE</code>: 设备的大小。</li><li><code>RO</code>: 设备是否为只读模式（1表示是，0表示否）。</li><li><code>TYPE</code>: 设备的类型（例如disk, part, loop等）。</li><li><code>MOUNTPOINTS</code>: 设备挂载的路径。</li></ul><h2 id="设备类型" tabindex="-1"><a class="header-anchor" href="#设备类型"><span>设备类型</span></a></h2><ol><li><strong>disk</strong>: 表示这是一个物理存储设备，比如硬盘驱动器、固态硬盘（SSD）或USB闪存驱动器。它通常包含一个或多个分区。 <ol><li><strong>part</strong>: 表示这是一个分区，它是物理存储设备（disk）上的一个逻辑部分。分区是用于组织和管理磁盘空间的区域。</li></ol></li><li>loop: 表示这是一个回环设备，它允许文件系统被当作块设备挂载。通常用于挂载磁盘映像文件（如ISO文件）。</li><li>rom: 表示只读存储器，通常用于存储固件或系统引导信息。</li><li><strong>lvm</strong>: 表示逻辑卷管理（Logical Volume Management）设备。LVM是一种高级存储管理技术，它允许将多个物理存储设备组合成一个逻辑存储池，并在其中创建和管理逻辑卷。</li><li>dm: 表示设备映射，通常用于Linux内核的设备映射器，它可以用于创建设备映射，如软件RAID、LVM或加密设备。</li><li>crypt: 表示加密设备，通常用于LUKS（Linux Unified Key Setup）加密的存储设备。</li><li>raid: 表示RAID（冗余阵列）设备，用于将多个物理存储设备组合成一个逻辑设备以提供冗余、性能提升或两者兼具。</li><li>scsi: 表示小型计算机系统接口（SCSI）设备，这是一种用于连接和识别存储设备的接口。</li><li>nvme: 表示非易失性内存快速存储技术（NVMe）设备，这是一种高性能的存储接口，通常用于固态硬盘。</li><li>sata: 表示串行高级技术附件（SATA）设备，这是一种常见的硬盘和固态硬盘接口。</li></ol><h2 id="etc目录" tabindex="-1"><a class="header-anchor" href="#etc目录"><span><code>/etc</code>目录</span></a></h2><p>etc不是缩写，而是and so on。etc目录在Linux系统中用于存放各种配置文件，包括网络配置文件。</p><h2 id="dns服务器选择" tabindex="-1"><a class="header-anchor" href="#dns服务器选择"><span>DNS服务器选择</span></a></h2><table><thead><tr><th>DNS提供商</th><th>DNS服务器IP地址</th></tr></thead><tbody><tr><td>百度公共DNS服务IP</td><td>180.76.76.76</td></tr><tr><td>阿里云DNS</td><td>223.6.6.6, 223.5.5.5</td></tr><tr><td>腾讯DNS</td><td>119.29.29.29</td></tr><tr><td>电信</td><td>101.226.4.6</td></tr><tr><td>联通</td><td>123.125.81.6</td></tr><tr><td>移动</td><td>101.226.4.6</td></tr><tr><td>铁通</td><td>101.226.4.6</td></tr></tbody></table><table><thead><tr><th>服务描述</th><th>DNS服务器IP地址</th></tr></thead><tbody><tr><td>纯净无劫持</td><td>114.114.114.114, 114.114.114.115</td></tr><tr><td>拦截钓鱼病毒木马网站</td><td>114.114.114.119, 114.114.115.119</td></tr><tr><td></td><td>114.114.114.110, 114.114.115.110</td></tr></tbody></table>`,95)]))}const g=s(k,[["render",d],["__file","Ubuntu-22.04-Server安装.html.vue"]]),o=JSON.parse('{"path":"/wiki/Ubuntu-22.04-Server%E5%AE%89%E8%A3%85.html","title":"Ubuntu-22.04-Server安装","lang":"zh-CN","frontmatter":{"date":"2024-10-10T00:00:00.000Z","title":"Ubuntu-22.04-Server安装","cover":"https://res.cloudinary.com/canonical/image/fetch/f_auto,q_auto,fl_sanitize,w_500,h_500/https://assets.ubuntu.com/v1/3b5fa561-mascot-numbat@2x.png","description":"安装引导 检查操作系统版本、版本代号、内核版本、架构 检查操作系统版本、版本代号、内核版本、架构检查操作系统版本、版本代号、内核版本、架构 初始化配置 用户初步管理 启用root Ubuntu安装时，强制让用户创建了一个普通用户，但却没有让配置root用户。 Ubuntu默认不建议用户直接使用root，这里可以通过设置root口令让root可用。 这时...","gitInclude":[],"head":[["meta",{"property":"og:url","content":"https://vuepress-theme-hope-docs-demo.netlify.app/wiki/Ubuntu-22.04-Server%E5%AE%89%E8%A3%85.html"}],["meta",{"property":"og:site_name","content":"Wiki"}],["meta",{"property":"og:title","content":"Ubuntu-22.04-Server安装"}],["meta",{"property":"og:description","content":"安装引导 检查操作系统版本、版本代号、内核版本、架构 检查操作系统版本、版本代号、内核版本、架构检查操作系统版本、版本代号、内核版本、架构 初始化配置 用户初步管理 启用root Ubuntu安装时，强制让用户创建了一个普通用户，但却没有让配置root用户。 Ubuntu默认不建议用户直接使用root，这里可以通过设置root口令让root可用。 这时..."}],["meta",{"property":"og:type","content":"article"}],["meta",{"property":"og:image","content":"https://res.cloudinary.com/canonical/image/fetch/f_auto,q_auto,fl_sanitize,w_500,h_500/https://assets.ubuntu.com/v1/3b5fa561-mascot-numbat@2x.png"}],["meta",{"property":"og:locale","content":"zh-CN"}],["meta",{"name":"twitter:card","content":"summary_large_image"}],["meta",{"name":"twitter:image:src","content":"https://res.cloudinary.com/canonical/image/fetch/f_auto,q_auto,fl_sanitize,w_500,h_500/https://assets.ubuntu.com/v1/3b5fa561-mascot-numbat@2x.png"}],["meta",{"name":"twitter:image:alt","content":"Ubuntu-22.04-Server安装"}],["meta",{"property":"article:published_time","content":"2024-10-10T00:00:00.000Z"}],["script",{"type":"application/ld+json"},"{\\"@context\\":\\"https://schema.org\\",\\"@type\\":\\"Article\\",\\"headline\\":\\"Ubuntu-22.04-Server安装\\",\\"image\\":[\\"https://res.cloudinary.com/canonical/image/fetch/f_auto,q_auto,fl_sanitize,w_500,h_500/https://assets.ubuntu.com/v1/3b5fa561-mascot-numbat@2x.png\\"],\\"datePublished\\":\\"2024-10-10T00:00:00.000Z\\",\\"dateModified\\":null,\\"author\\":[{\\"@type\\":\\"Person\\",\\"name\\":\\"Mr.Hope\\",\\"url\\":\\"https://mister-hope.com\\"}]}"]]},"headers":[{"level":2,"title":"安装引导","slug":"安装引导","link":"#安装引导","children":[]},{"level":2,"title":"初始化配置","slug":"初始化配置","link":"#初始化配置","children":[{"level":3,"title":"用户初步管理","slug":"用户初步管理","link":"#用户初步管理","children":[]},{"level":3,"title":"配置sshd","slug":"配置sshd","link":"#配置sshd","children":[]},{"level":3,"title":"网络配置","slug":"网络配置","link":"#网络配置","children":[]},{"level":3,"title":"时钟配置","slug":"时钟配置","link":"#时钟配置","children":[]},{"level":3,"title":"Ubuntu安装Docker","slug":"ubuntu安装docker","link":"#ubuntu安装docker","children":[]}]},{"level":2,"title":"安装后产生的问题","slug":"安装后产生的问题","link":"#安装后产生的问题","children":[{"level":3,"title":"磁盘分配错了","slug":"磁盘分配错了","link":"#磁盘分配错了","children":[]}]},{"level":2,"title":"lsblk表头解释","slug":"lsblk表头解释","link":"#lsblk表头解释","children":[]},{"level":2,"title":"设备类型","slug":"设备类型","link":"#设备类型","children":[]},{"level":2,"title":"/etc目录","slug":"etc目录","link":"#etc目录","children":[]},{"level":2,"title":"DNS服务器选择","slug":"dns服务器选择","link":"#dns服务器选择","children":[]}],"readingTime":{"minutes":6.88,"words":2063},"filePathRelative":"wiki/Ubuntu-22.04-Server安装.md","localizedDate":"2024年10月10日","autoDesc":true}');export{g as comp,o as data};
